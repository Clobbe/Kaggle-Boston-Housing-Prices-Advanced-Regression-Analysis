---
title: "Kaggle Project : Boston Housing - Advanced Regression Techniques"
author: "Clobbe Norman"
date: "11/19/2017"
output: github_document
---

```{r setup, include = FALSE, cache = FALSE}
knitr::opts_chunk$set(error = TRUE)
```

Need to clean up this bulletlist later + write an introduction to the case and thank Pedro Marcelino for the inspiration and [guidance on his approach to this project](https://www.kaggle.com/pmarcelino/comprehensive-data-exploration-with-python)

1. **Understand the problem**
We'll look at each variable and do a philosophical analysis about their meaning and importance for this problem.*

2. **Univariable study**
We'll just focus on the dependent variable ('SalePrice') and try to know a little bit more about it.

3. **Multivariate study**
We'll try to understand how the dependent variable and independent variables relate.

4. **Basic cleaning**
We'll clean the dataset and handle the missing data, outliers and categorical variables.

5. **Test assumptions**
We'll check if our data meets the assumptions required by most multivariate techniques.

## Pick up the right toolset

Meaning, importing the goodies from `tidyverse` for easy data wrangling, `ggplot2` for some nice visualization and `broom` for making sure we don't miss anything while creating our models later on.

```{r echo=FALSE}
require(ggplot2)
require(tidyverse)
require(broom)
require(reshape2)

```

```{r }
df.test.raw <- read_csv('test.csv', col_names = T)
df.train.raw <- read_csv('train.csv', col_names = T)

df.test <- df.test.raw
df.train <- df.train.raw
```

Now let's have a look at the the data that we loaded into R.


```{r }
df.train %>% 
  glimpse()

```

Wow!
That's impressive - 1,460 observations and 81 variables.

From this quick overview of the dataset it seems like R interpret all the text varibles as `<chr>`, character variables. Something which will mess up later when we want to build our model and doing some visualization.

Let's fix that by turning these characters into proper factors with levels instead.


```{r }
df.test <- df.test %>% 
  unclass() %>% 
  as.data.frame()

df.train <- df.train %>% 
  unclass() %>% 
  as.data.frame()
```

Let's have a look now again at the variables.

```{r }
df.train %>%
  glimpse()

```



##Let's look at the features
```{r }
df.train %>% 
  colnames() %>% 
  sort()

```
We did some variable evaluation, tidious but very useful. It was done in a regular [Google Spreadsheet.](https://docs.google.com/spreadsheets/d/16RMnBO7TQLbaJIiphSrcFAlJq7ewtXyojskUUsE__FM/edit?usp=sharing)

From the initial evaluation with determine that some variables are more interesting for houses and some for apartment houses. 

By following the recommendation from previous author we grouped variables into the three categories:

* `building`

* `location`

* `space`

We then also evaluated how much influence each variable would have on the price. Classifying each variable with an expectation of either `Hi`, `Med` or `Low` influence.

The problem is getting more and more tangible and now it's just about validating wether the selected variables indeed are positive correlated with an increase in price. 

```{r echo = FALSE }

#setting which columns to filter out from the main dataset
expectation.hi <- c("Neighborhood","Condition1","OverallQual",
                    "OverallCond","YearBuilt","YearRemodAdd",
                    "TotRmsAbvGrd","Fireplaces","YrSold","SalePrice")

expectation.med <- c("MSZoning","LotArea","LandContour","Utilities","LotConfig",
                     "BldgType","HouseStyle","RoofStyle","MasVnrType","MasVnrArea",
                     "ExterQual","ExterCond","Foundation","BsmtQual","BsmtCond",
                     "BsmtExposure","BsmtFinType1","BsmtFinSF1","BsmtFinType2",
                     "BsmtFinSF2","BsmtUnfSF","TotalBsmtSF","1stFlrSF","2ndFlrSF",
                     "LowQualFinSF","GrLivArea","BsmtFullBath","BsmtHalfBath","FullBath",
                     "HalfBath","BedroomAbvGr","KitchenAbvGr","KitchenQual","FireplaceQu",
                     "GarageType","GarageYrBlt","GarageFinish","GarageCars","GarageArea",
                     "GarageQual","GarageCond","PavedDrive","WoodDeckSF","OpenPorchSF",
                     "EnclosedPorch","3SsnPorch","ScreenPorch","PoolQC","MoSold","SaleType",
                     "SaleCondition", "SalePrice")

```


To get the overview and find which variables that correlate with increased price it's convenient to do a matrix of plot who just take care of everything and give us an image with everything we're interested in. 

```{r echo = FALSE, eval= FALSE }
df.train.hi <- df.train %>% select(expectation.hi)
df.train.med <- df.train %>% select(expectation.med)

require(GGally)
ggpairs(df.train.hi, cardinality_threshold = 25)
```

###Variables expected to have 'Hi' influence
![Correlation matrix plot for hi influence variables](https://dl.dropboxusercontent.com/s/bry1ahaxnyu1s2c/Screenshot%202017-11-25%2023.08.43.png)
Looks like some of the variables we expected to have high influence are positively correlated with the price. The highlighted variables are:

*  `OverallQual` (*perhaps the most fluffy variable in this dataset - the overall quality of materials and finish*)

*  `YearBuilt` (*the year when the house was built*)

*  `YearRemodAdd` (*the year when the house last was remodule*)

*  `TotRmsAbvGrd` (*the number of rooms above grade (bathrooms not included)*)




```{r}

```